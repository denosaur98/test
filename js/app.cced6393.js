(function(){"use strict";var t={3963:function(t,e,a){var n=a(5130),l=a(6768);const s={class:"app"};function u(t,e){const a=(0,l.g2)("RouterView");return(0,l.uX)(),(0,l.CE)("div",s,[(0,l.bF)(a)])}var r=a(1241);const i={},c=(0,r.A)(i,[["render",u]]);var o=c,p=a(1387),v=(a(4114),a(4232)),h=a(144),d=a(782),k=a(4373),f=(0,d.y$)({state(){return{pageNumber:1,spaceshipData:null,searchQuery:""}},mutations:{setSpaceshipData(t,e){t.spaceshipData=e},setPageNumber(t,e){t.pageNumber=e},setSearchQuery(t,e){t.searchQuery=e}},actions:{async fetchSpaceshipData({commit:t,state:e}){try{const a=await k.A.get(`https://swapi.dev/api/starships/?page=${e.pageNumber}`);t("setSpaceshipData",a.data)}catch(a){console.error("Ошибка: ",a)}}}});const _={class:"spaceship__list"},m={key:0,class:"list-wrapper"},L={class:"search__copy-link"},g={class:"list__items-wrapper"},b={class:"item__table"},y={class:"pagination"},w={key:1,class:"list__loading"};var C={__name:"SpaceshipList",setup(t){const e=(0,l.EW)((()=>f.state.spaceshipData)),a=(0,h.KR)(f.state.searchQuery),s=(0,l.EW)((()=>e.value.results.filter((t=>t.name.toLowerCase().includes(a.value.toLowerCase()))))),u=(0,p.rd)(),r=(0,p.lq)(),i=(0,l.EW)((()=>{const t=r.params.page?parseInt(r.params.page,10):1,e=encodeURIComponent(a.value);return`${window.location.origin}/starships/page/${t}?search=${e}`}));function c(t){const e=t.match(/page=(\d+)/);return e?parseInt(e[1],10):null}async function o(){if(e.value.previous){const t=c(e.value.previous);t&&(f.commit("setPageNumber",t),await f.dispatch("fetchSpaceshipData"),u.push(`/starships/page/${t}?search=${a.value}`))}}async function d(){if(e.value.next){const t=c(e.value.next);t&&(f.commit("setPageNumber",t),await f.dispatch("fetchSpaceshipData"),u.push(`/starships/page/${t}?search=${a.value}`))}}function k(t){const e=t.split("/");return e[e.length-2]}return(0,l.sV)((async()=>{const t=r.params.page?parseInt(r.params.page,10):1,e=r.query.search||"";f.commit("setPageNumber",t),f.commit("setSearchQuery",e),a.value=e,await f.dispatch("fetchSpaceshipData")})),(0,l.wB)(a,(t=>{f.commit("setSearchQuery",t),u.push(`/starships/page/${f.state.pageNumber}?search=${t}`)})),(t,u)=>{const r=(0,l.g2)("RouterLink");return(0,l.uX)(),(0,l.CE)("div",_,[e.value?((0,l.uX)(),(0,l.CE)("div",m,[(0,l.Lk)("p",L,(0,v.v_)(i.value),1),(0,l.bo)((0,l.Lk)("input",{class:"list__search",placeholder:"ВВЕДИТЕ НАЗВАНИЕ КОРАБЛЯ:","onUpdate:modelValue":u[0]||(u[0]=t=>a.value=t)},null,512),[[n.Jo,a.value]]),(0,l.Lk)("div",g,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.value,(t=>((0,l.uX)(),(0,l.Wv)(r,{to:`/starships/${k(t.url)}`,class:"list__item",key:t.model},{default:(0,l.k6)((()=>[(0,l.Lk)("table",b,[u[1]||(u[1]=(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"Название"),(0,l.Lk)("th",null,"Вместимость"),(0,l.Lk)("th",null,"Грузоподъемнось"),(0,l.Lk)("th",null,"Производитель"),(0,l.Lk)("th",null,"Экипаж")],-1)),(0,l.Lk)("tr",null,[(0,l.Lk)("td",null,(0,v.v_)(t.name),1),(0,l.Lk)("td",null,(0,v.v_)(t.passengers),1),(0,l.Lk)("td",null,(0,v.v_)(t.cargo_capacity),1),(0,l.Lk)("td",null,(0,v.v_)(t.manufacturer),1),(0,l.Lk)("td",null,(0,v.v_)(t.crew),1)])])])),_:2},1032,["to"])))),128))]),(0,l.Lk)("div",y,[(0,l.Lk)("button",{class:(0,v.C4)(["pagination__prev",e.value.previous?"":"disabled"]),onClick:o},"prev",2),(0,l.Lk)("button",{class:(0,v.C4)(["pagination__next",e.value.next?"":"disabled"]),onClick:d},"next",2)])])):((0,l.uX)(),(0,l.CE)("div",w,u[2]||(u[2]=[(0,l.Lk)("p",null,"Загрузка...",-1)])))])}}};const E=(0,r.A)(C,[["__scopeId","data-v-a129bad4"]]);var S=E;const X={class:"spaceship__page"},O={key:0,class:"spaceship-wrapper"},$={class:"item__table"},x={class:"item__table"},D={class:"item__table"},P={key:0},I={key:1};var Q={__name:"SpaceshipPage",setup(t){const e=(0,p.lq)(),a=(0,l.EW)((()=>f.state.spaceshipData)),n=(0,l.EW)((()=>{const t=e.fullPath.split("/");return t[t.length-1]})),s=(0,l.EW)((()=>a.value&&a.value.results?a.value.results.find((t=>{const e=t.url.split("/"),a=e[e.length-2];return a===n.value})):null));return(0,l.sV)((async()=>{await f.dispatch("fetchSpaceshipData")})),(t,e)=>((0,l.uX)(),(0,l.CE)("div",X,[s.value?((0,l.uX)(),(0,l.CE)("div",O,[(0,l.Lk)("table",$,[e[0]||(e[0]=(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"Название"),(0,l.Lk)("th",null,"Вместимость"),(0,l.Lk)("th",null,"Грузоподъемнось"),(0,l.Lk)("th",null,"Производитель"),(0,l.Lk)("th",null,"Экипаж")],-1)),(0,l.Lk)("tr",null,[(0,l.Lk)("td",null,(0,v.v_)(s.value.name),1),(0,l.Lk)("td",null,(0,v.v_)(s.value.passengers),1),(0,l.Lk)("td",null,(0,v.v_)(s.value.cargo_capacity),1),(0,l.Lk)("td",null,(0,v.v_)(s.value.manufacturer),1),(0,l.Lk)("td",null,(0,v.v_)(s.value.crew),1)])]),(0,l.Lk)("table",x,[e[1]||(e[1]=(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"Расходные материалы"),(0,l.Lk)("th",null,"Стоимость"),(0,l.Lk)("th",null,"Рейтинг"),(0,l.Lk)("th",null,"Количество"),(0,l.Lk)("th",null,"Макс.Скорость")],-1)),(0,l.Lk)("tr",null,[(0,l.Lk)("td",null,(0,v.v_)(s.value.consumables),1),(0,l.Lk)("td",null,(0,v.v_)(s.value.cost_in_credits),1),(0,l.Lk)("td",null,(0,v.v_)(s.value.hyperdrive_rating),1),(0,l.Lk)("td",null,(0,v.v_)(s.value.length),1),(0,l.Lk)("td",null,(0,v.v_)(s.value.max_atmosphering_speed),1)])]),(0,l.Lk)("table",D,[(0,l.Lk)("tr",null,[e[2]||(e[2]=(0,l.Lk)("th",null,"Модель",-1)),e[3]||(e[3]=(0,l.Lk)("th",null,"Макс. кол-во пассажиров",-1)),e[4]||(e[4]=(0,l.Lk)("th",null,"Класс",-1)),s.value.films.length>0?((0,l.uX)(),(0,l.CE)("th",P,"Фильмы")):(0,l.Q3)("",!0),s.value.pilots.length>0?((0,l.uX)(),(0,l.CE)("th",I,"Пилоты")):(0,l.Q3)("",!0)]),(0,l.Lk)("tr",null,[(0,l.Lk)("td",null,(0,v.v_)(s.value.model),1),(0,l.Lk)("td",null,(0,v.v_)(s.value.passengers),1),(0,l.Lk)("td",null,(0,v.v_)(s.value.starship_class),1),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.value.films,((t,e)=>((0,l.uX)(),(0,l.CE)("td",{class:"column-point",key:e},(0,v.v_)(t),1)))),128)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.value.pilots,((t,e)=>((0,l.uX)(),(0,l.CE)("td",{class:"column-point",key:e},(0,v.v_)(t),1)))),128))])])])):(0,l.Q3)("",!0)]))}};const j=(0,r.A)(Q,[["__scopeId","data-v-3f7e830a"]]);var N=j;const W=[{path:"/",redirect:"/starships/page/1"},{path:"/starships/page/:page",component:S},{path:"/starships/:id",component:N}];var A=(0,p.aE)({history:(0,p.LA)(),routes:W});(0,n.Ef)(o).use(A).mount("#app")}},e={};function a(n){var l=e[n];if(void 0!==l)return l.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,a),s.exports}a.m=t,function(){var t=[];a.O=function(e,n,l,s){if(!n){var u=1/0;for(o=0;o<t.length;o++){n=t[o][0],l=t[o][1],s=t[o][2];for(var r=!0,i=0;i<n.length;i++)(!1&s||u>=s)&&Object.keys(a.O).every((function(t){return a.O[t](n[i])}))?n.splice(i--,1):(r=!1,s<u&&(u=s));if(r){t.splice(o--,1);var c=l();void 0!==c&&(e=c)}}return e}s=s||0;for(var o=t.length;o>0&&t[o-1][2]>s;o--)t[o]=t[o-1];t[o]=[n,l,s]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var l,s,u=n[0],r=n[1],i=n[2],c=0;if(u.some((function(e){return 0!==t[e]}))){for(l in r)a.o(r,l)&&(a.m[l]=r[l]);if(i)var o=i(a)}for(e&&e(n);c<u.length;c++)s=u[c],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(o)},n=self["webpackChunktest"]=self["webpackChunktest"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(3963)}));n=a.O(n)})();
//# sourceMappingURL=app.cced6393.js.map